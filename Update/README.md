# Herramientas de Actualizaci√≥n - Sistema de Cache Busting

Github Pages sera un regalo de dios para nosotros los pobres jodidos que no podemos costearnos hostear NADA en NINGUN LADO que se atreva a si quiera cobrar 1 centimo por sus servicios. Lamentablemente, Github Pages cachea un chingo las cosas de la web, cosa que, para mi especifica web es una putada porque todo funciona en base a jsons que si llego a cambiar, pero alguien tiene los viejos aun cacheados, se rompen cosas de a gratis.

## üÜï Sistema Nuevo: Timestamp-Based Versioning (RECOMENDADO)

Este es el sistema mejorado que usa timestamps √∫nicos en lugar de n√∫meros de versi√≥n manuales.

### Archivos del Nuevo Sistema
- **`update-cache-version.js`** - Script de Node.js con timestamps autom√°ticos
- **`update-cache-version.ps1`** - Script de PowerShell con timestamps autom√°ticos
- **`cache-version.json`** - Info de la √∫ltima versi√≥n generada

### Uso del Nuevo Sistema

#### Opci√≥n 1: Node.js (Recomendado)
```bash
cd Update
node update-cache-version.js
```

#### Opci√≥n 2: PowerShell (Sin Node.js)
```powershell
cd Update
.\update-cache-version.ps1
```

### Ventajas
- ‚úÖ Cada versi√≥n es √∫nica (basada en timestamp)
- ‚úÖ No hay que recordar incrementar n√∫meros
- ‚úÖ Timestamp muestra exactamente cu√°ndo se actualiz√≥
- ‚úÖ Imposible tener conflictos de versi√≥n

---

## üì¶ Sistema Antiguo (Deprecated)

**Nota:** El sistema antiguo con `version.json` sigue funcionando pero se recomienda usar el nuevo sistema de timestamps.

### Archivos del Sistema Antiguo
- **`version.json`** - La version actual (manual)
- **`update-version.js`** - Script que incrementa versi√≥n num√©ricamente
- **`update-version.ps1`** - PowerShell para el sistema antiguo

### Uso del Sistema Antiguo

#### Node.js
```bash
cd Update
node update-version.js
```

#### PowerShell
#### PowerShell
```powershell
.\update-version.ps1
```

---

## üîß Cu√°ndo Ejecutar

**SIEMPRE antes de hacer commit y push**, especialmente despu√©s de:
- Modificar archivos JavaScript
- Actualizar archivos CSS  
- Cambiar archivos JSON de contenido
- Modificar cualquier recurso

## üìù Workflow Recomendado

```bash
# 1. Hacer tus cambios de c√≥digo/contenido
# 2. Actualizar cache version
cd Update
node update-cache-version.js
cd ..

# 3. Commit y push
git add .
git commit -m "Update content and cache version"
git push
```

## ‚ùì Qu√© Hace el Sistema

1. **Genera timestamp √∫nico** basado en milisegundos actuales
2. **Busca todos los archivos HTML** recursivamente
3. **Actualiza todos los enlaces** de recursos:
   - CSS: `href="styles.css"` ‚Üí `href="styles.css?v=1761329719942"`
   - JavaScript: `src="main.js"` ‚Üí `src="main.js?v=1761329719942"`  
   - JSON: `'data.json'` ‚Üí `'data.json?v=1761329719942'`
4. **Guarda info** en `cache-version.json`

## üêõ Troubleshooting

**Problema**: Los cambios no se reflejan en producci√≥n  
**Soluci√≥n**: Ejecuta el script de cache version y haz push

**Problema**: Script no encuentra archivos  
**Soluci√≥n**: Aseg√∫rate de ejecutar desde el directorio `Update/`

**Problema**: Error "ENOENT" o archivo no encontrado  
**Soluci√≥n**: Verifica que Node.js est√© instalado o usa la versi√≥n PowerShell

## C√≥mo funciona

1. `update-version.js` lee la versi√≥n actual de `version.json`
2. Incrementa el n√∫mero de versi√≥n patch (1.0.1 ‚Üí 1.0.2)
3. Actualiza todos los archivos HTML del proyecto para usar la nueva versi√≥n en archivos CSS/JS/JSON

Esto se asegura que siempre se obtenga el contenido mas reciente sin que el cache me quiera trolear mostrando cosas que yo ya modifique.

Esto NO esta relacionado con la version de la pagina que sale en el Update Log, estos se mueven mucho mas frecuentemente y mientras aun estoy haciendo pruebas para refrescar cosas.